{% extends 'menu.html' %}
{% block content %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">

<div class="wtf-container" style="overflow-x: hidden;">
  <div class="row">
    <div class="col-md-auto">
      <div class="container">
        <h4 class="text-primary">График работы сотрудника {{ fioSotrudnika }}</h4>
          <form class="form-horizontal" method="POST" action="">
              {{ form.csrf_token() }}
              <div class="text-primary"> Режим работы сотрудника
               <button type="button" class="btn btn-outline-secondary" data-toggle="modal" title="Добавить запись"  {{ visible_ }}>
<!--                data-target="#RegimeWorkModal"   -->
               <i class="bi bi-calendar-plus" style="color:#0069D9"></i>
               </button>
              </div>
              <table class="table table-striped table-hover" >
                <thead>
                <th>№ кабинета</th>
                <th>Нечетное</th>
                <th>Четное</th>
                <th>№ монитора</th>
                <th>№ страницы</th>
                <th>Специальность</th>
                </thead>
                <tr>
                 {% for NROOM_KR , NOEVEN_DAY, EVEN_DAY, NTV, NLIST, NSPZ in result_rasp %}
                 <tr>
                 <td>{{ NROOM_KR }}</td>
                 <td>{{ NOEVEN_DAY or "" }}</td>
                 <td>{{ EVEN_DAY or "" }}</td>
                 <td>{{ NTV }}</td>
                 <td>{{ NLIST }}</td>
                 <td>{{ NSPZ or "" }}</td>
                 <td style="width:12%;text-align:center;white-space: nowrap;">
                    <button type="button" class="btn btn-outline-secondary" data-toggle="modal"  title="Редактировать запись" >
<!--                        data-target="#RegimeWorkModal"-->
                    <i class="bi bi-pencil" style="color:#0069D9"></i>
                    </button>

                    <button type="button" class="btn btn-outline-secondary" data-toggle="modal" title="Удалить запись"">
<!--                      data-target="#DelRegimeWorkModal{{ doc }}-->
                    <i class="bi bi-trash" style="color:#0069D9"></i>
                    </button>
                 </td>
                 </tr>
                 {% endfor %}
              </table>
          </form>
      </div>
    </div>

<div>
    <h5 class="text-primary">
       <form method="get" action="wtf_template3" id="MyForm">
         <select name="otd" class="custom-select custom-select-lg mb-3" aria-label="Default select example" onchange="document.getElementById('MyForm').submit()">
         {% for otd, notd in result_podr2 %}
         <option value="{{ otd }}"{% if loop.first %} SELECTED{% endif %}>{{ notd }}</option>
         {% endfor %}
         </select>
       </form>
    </h5>

    <table id="myTable" class="table table-borderless" >
        <thead>
        <th>
            <input class="form-control" list="datalistOptions" id="myInput" placeholder="Пишите для поиска..." autocomplete="off">
        </th>
        </thead>
    <tbody>
        {% for DOC, NDOC in result_fio %}
        {% for OTD, NOTD in result_podr %}
        <tr onclick="window.location.href='wtf_template3?otd={{ OTD }}&doc={{ DOC }}'; return false">
          <td style="padding:2px">{{ NDOC }}</td>
        </tr>
        {% endfor %}
    {% endfor %}

    </tbody>
    </table>
</div>
</div>

</div>

<script>

  function filterTable(event) {
    var filter = event.target.value.toUpperCase();
    var rows = document.querySelector("#myTable tbody").rows;

    for (var i = 0; i < rows.length; i++) {
        var firstCol = rows[i].cells[0].textContent.toUpperCase();
        if (firstCol.indexOf(filter) > -1) {
            rows[i].style.display = "";
        } else {
            rows[i].style.display = "none";
        }
    }
  }

document.querySelector('#myInput').addEventListener('keyup', filterTable, false);

</script>
{% endblock %}
